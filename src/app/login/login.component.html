<div class="login-form">
  <h2>Se Connecter</h2>

  <!-- ğŸ”„ Bouton de switch -->
  <div style="text-align: center; margin-bottom: 20px;">
    <button class="btn-secondary" type="button" (click)="toggleLoginMode()">
      {{ useFaceLogin ? 'ğŸ” Connexion par mot de passe' : 'ğŸ“· Connexion par visage' }}
    </button>
  </div>

  <!-- ğŸ” Connexion par mot de passe -->
  <form *ngIf="!useFaceLogin" (ngSubmit)="onSubmit()" #loginForm="ngForm">
    <div class="form-group">
      <label for="email">Email :</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="credentials.email"
        required
        placeholder="Votre email" />
    </div>

    <div class="form-group">
      <label for="password">Mot de passe :</label>
      <input
        type="password"
        id="password"
        name="motDePasse"
        [(ngModel)]="credentials.motDePasse"
        required
        placeholder="Votre mot de passe" />
    </div>

    <button
      id="submit"
      type="submit"
      class="btn-submit"
      [disabled]="loginForm.invalid">
      ğŸ” Se Connecter
    </button>
  </form>

  <!-- ğŸ“· Connexion faciale -->
  <div *ngIf="useFaceLogin" class="facial-login">
    <h3>Connexion par visage</h3>

    <video
      id="video"
      width="400"
      height="300"
      autoplay
      muted
      style="border: 1px solid #ccc; transform: scaleX(-1); margin-bottom: 10px; display: block;">
    </video>

    <!-- ğŸ§  RÃ©sultat dâ€™analyse -->
    <div *ngIf="analysisResult" class="analysis-box">
      <h4>ğŸ§  Analyse faciale</h4>
      <p>ğŸ‘¤ Ã‚ge estimÃ© : <strong>{{ analysisResult.age }}</strong></p>
      <p>ğŸš» Sexe : <strong>{{ analysisResult.gender }}</strong></p>
      <p>ğŸ˜€ Expression : <strong>{{ analysisResult.expression }}</strong></p>
    </div>

    <button type="button" (click)="initCamera(); loginWithFace();" class="btn-secondary">
      ğŸ“· Se connecter par visage
    </button>

    <div *ngIf="distanceScore !== null" class="score-info">
      ğŸ¯ Distance mesurÃ©e : <strong>{{ distanceScore | number:'1.3-3' }}</strong>
    </div>
  </div>

  <!-- âœ… Message de succÃ¨s ou dâ€™erreur -->
  <p class="message" [class.error]="message.includes('âŒ')">{{ message }}</p>

  <!-- ğŸ”— Lien d'inscription et MDP -->
  <p class="link-message">
    Vous n'avez pas encore de compte ?
    <a routerLink="/inscription">CrÃ©er un compte</a>
  </p>
  <p class="link-message">
    <a routerLink="/forgot-password">Mot de passe oubliÃ© ?</a>
  </p>
</div>

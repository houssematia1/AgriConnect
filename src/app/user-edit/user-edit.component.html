<div class="edit-user-container">
  <div class="edit-user-card">
    <div class="card-header">
      <div class="header-content">
        <h2><i class="fas fa-user-edit"></i> Modifier Utilisateur</h2>
        <p class="subtitle">Mettez à jour les informations de l'utilisateur</p>
      </div>
      <div class="user-avatar">
        <div class="avatar-wrapper">
          <img [src]="getUserPhotoUrl(user)" alt="User Avatar" (error)="handleImageError($event)">
          <div class="upload-overlay" (click)="onPhotoClick()">
            <i class="fas fa-camera"></i>
            <span>Changer la photo</span>
          </div>
        </div>
        <input type="file" #fileInput style="display: none" (change)="onFileSelected($event)" accept="image/*">
      </div>
    </div>

    <div class="form-container">
      <div class="form-section">
        <h3><i class="fas fa-id-card"></i> Informations Personnelles</h3>
        <div class="form-row">
          <div class="form-group">
            <label>
              <i class="fas fa-user"></i>
              Nom
            </label>
            <input [(ngModel)]="user.nom" type="text" placeholder="Entrez le nom" />
          </div>

          <div class="form-group">
            <label>
              <i class="fas fa-user"></i>
              Prénom
            </label>
            <input [(ngModel)]="user.prenom" type="text" placeholder="Entrez le prénom" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3><i class="fas fa-address-book"></i> Contact</h3>
        <div class="form-row">
          <div class="form-group">
            <label>
              <i class="fas fa-envelope"></i>
              Email
            </label>
            <input [(ngModel)]="user.email" type="email" placeholder="Entrez l'email" />
          </div>

          <div class="form-group">
            <label>
              <i class="fas fa-phone"></i>
              Téléphone
            </label>
            <input [(ngModel)]="user.numeroDeTelephone" type="text" placeholder="Entrez le numéro" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3><i class="fas fa-user-shield"></i> Rôle</h3>
        <div class="form-group role-select">
          <label>
            <i class="fas fa-user-tag"></i>
            Sélectionnez le rôle
          </label>
          <select [(ngModel)]="user.role">
            <option value="admin">Administrateur</option>
            <option value="user">Client</option>
            <option value="agriculteur">Agriculteur</option>
            <option value="livreur">Livreur</option>
          </select>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="save-btn" (click)="onSubmit()">
        <i class="fas fa-save"></i>
        <span>Enregistrer les modifications</span>
      </button>
      <button class="cancel-btn" (click)="onCancel()">
        <i class="fas fa-times"></i>
        <span>Annuler</span>
      </button>
    </div>

    <div class="message" [class.success]="message?.includes('succès')" [class.error]="message?.includes('erreur')">
      <i [class]="message?.includes('succès') ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'"></i>
      {{ message }}
    </div>
  </div>
</div>

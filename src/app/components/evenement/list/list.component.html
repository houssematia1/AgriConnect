<div class="container">
  <h2 class="title">ğŸŒ¿ Ã‰vÃ©nements Ã‰cologiques</h2>

  <!-- Section recherche et ajout -->
  <div class="controls">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="ğŸ” Rechercher un Ã©vÃ©nement..."
      class="search-input"
    />
    <a routerLink="/evenements/new" class="btn btn-primary">
      â• Ajouter un Ã©vÃ©nement
    </a>
  </div>

  <!-- Message si aucun rÃ©sultat -->
  <div *ngIf="filteredEvenements.length === 0" class="no-events">
    Aucun Ã©vÃ©nement trouvÃ© pour cette recherche.
  </div>

  <!-- Affichage en cartes -->
  <div *ngIf="filteredEvenements.length > 0" class="event-grid">
    <div class="event-card" *ngFor="let e of filteredEvenements">
      <div class="event-image" [style.backgroundImage]="'url(http://localhost:8082' + e.imageUrl + ')'" [routerLink]="['/evenements', e.id]">
        <span class="read-time">{{ e.dateDebut | date:'mediumDate' }}</span>
      </div>

      <div class="event-body">
        <div class="event-tag" [ngClass]="{
          'planifie': e.statut === 'PLANIFIE',
          'en-cours': e.statut === 'EN_COURS',
          'termine': e.statut === 'TERMINE',
          'inconnu': !e.statut
        }">
          {{ e.statut || 'Statut inconnu' }}
        </div>

        <h3 class="event-title" [routerLink]="['/evenements', e.id]">
          {{ e.nom }}
        </h3>

        <p class="event-description">
          {{ e.description || 'Pas de description.' }}
        </p>

        <div class="event-info">
          ğŸ‘¤ Organisateur : {{ e.organisateur || 'Non spÃ©cifiÃ©' }}<br>
          ğŸ‘¥ CapacitÃ© : {{ e.capaciteMax ?? 'Non spÃ©cifiÃ©e' }}<br>
          ğŸ—‚ï¸ CatÃ©gories : {{ getCategorieNames(e) }}
        </div>

        <div class="event-actions">
          <a [routerLink]="['/evenements/edit', e.id]" class="btn btn-warning">
            âœï¸ Modifier
          </a>
          <button (click)="delete(e.id)" class="btn btn-danger">
            ğŸ—‘ï¸ Supprimer
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
